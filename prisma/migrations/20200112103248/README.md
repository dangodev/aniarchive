# Migration `20200112103248`

This migration has been generated by Drew Powers at 1/12/2020, 10:32:48 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "aniarchive-v1"."Image" ADD COLUMN "copyright" text    ;

ALTER TABLE "aniarchive-v1"."Person" ADD COLUMN "image" text    REFERENCES "aniarchive-v1"."Image"("id") ON DELETE SET NULL;

ALTER TABLE "aniarchive-v1"."Studio" ADD COLUMN "image" text    REFERENCES "aniarchive-v1"."Image"("id") ON DELETE SET NULL;

CREATE UNIQUE INDEX "Image.url" ON "aniarchive-v1"."Image"("url")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200111220050-ghibli..20200112103248
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
 enum Country {
   AU
@@ -74,11 +74,12 @@
   order    Int
 }
 model Image {
-  id   String @default(cuid()) @id
-  name String
-  url  String
+  id        String  @default(cuid()) @id
+  copyright String?
+  name      String
+  url       String  @unique
 }
 model Person {
   ///comment A unique ID for this person
@@ -106,10 +107,12 @@
   ///comment A short bio for this person
   description String?
   ///comment First name of this person
   firstName   String
+  founded     Studio[] @relation(name: "StudioFounders")
+  ///comment Image of this person
+  image       Image?
   ///comment This personâ€™s name in Kanji (Japanese only)
-  founded     Studio[] @relation(name: "StudioFounders")
   kanji       String?
   ///comment Last name of this person
   lastName    String
   ///comment Location of this person
@@ -138,6 +141,7 @@
   country     Country
   films       Film[]
   foundedYear Int
   founders    Person[] @relation(name: "StudioFounders")
+  image       Image?
   name        String   @unique
 }
```


