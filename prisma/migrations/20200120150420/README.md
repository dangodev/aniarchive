# Migration `20200120150420`

This migration has been generated by Drew Powers at 1/20/2020, 3:04:20 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "aniarchive-v1"."Film" ADD COLUMN "trailer" text    ;

ALTER TABLE "aniarchive-v1"."FrameSequence" DROP COLUMN "order",
ADD COLUMN "timestampEnd" integer    ,
ADD COLUMN "timestampStart" integer    ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200119220018..20200120150420
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
 enum Country {
   AU
@@ -33,9 +33,9 @@
   composers      Person[]        @relation(name: "FilmComposers", onDelete: CASCADE)
   ///comment The directors of the film
   directors      Person[]        @relation(name: "FilmDirectors", onDelete: CASCADE)
   ///comment Animation frame sequences for the film
-  frameSequences FrameSequence[]
+  frameSequences FrameSequence[] @relation(name: "FilmFrameSequence", onDelete: CASCADE)
   ///comment Main image for the film
   image          Image           @relation(name: "FilmImage", onDelete: CASCADE)
   ///comment Releases of the film
   releases       Release[]
@@ -48,18 +48,21 @@
   ///comment Japanese title
   titleJP        String          @unique
   ///comment English title
   titleEN        String          @unique
+  ///comment URL to watch the trailer
+  trailer        String?
 }
 model FrameSequence {
-  id      String   @default(cuid()) @id
-  artists Person[] @relation(name: "FrameSequenceArtists", onDelete: CASCADE)
-  film    Film
-  image   Image    @relation(name: "FrameSequenceImage", onDelete: CASCADE)
-  notes   String
-  order   Int
-  video   String
+  id             String   @default(cuid()) @id
+  artists        Person[] @relation(name: "FrameSequenceArtists", onDelete: CASCADE)
+  film           Film     @relation(name: "FilmFrameSequence", onDelete: CASCADE)
+  image          Image    @relation(name: "FrameSequenceImage", onDelete: CASCADE)
+  notes          String
+  timestampStart Int?
+  timestampEnd   Int?
+  video          String
 }
 model Image {
   id        String  @default(cuid()) @id
```


